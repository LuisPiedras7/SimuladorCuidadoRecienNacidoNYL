<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()" aria-label="Volver">
        <
      </ion-button>
    </ion-buttons>
    <ion-title>Actividades de hoy</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="listado-page">
  <!-- Fondo con figuras que caen (reusa las clases del login) -->
  <div class="falling-area" aria-hidden="true">
    <div class="drop d1"></div>
    <div class="drop d2"></div>
    <div class="drop d3"></div>
    <div class="drop d4"></div>
    <div class="drop d5"></div>
  </div>
  <div class="list-wrap">
    <div *ngIf="actividades && actividades.length > 0">
      <div *ngFor="let a of actividades" class="activity-card" [class.completed]="a.completada">
        <div class="actividad-info">
          <div class="actividad-title">{{ a.actividad }}</div>
          <div class="actividad-date">{{ a.fecha_inicial | date:'short' }} <span class="sep">·</span> {{ a.fecha_limite | date:'short' }}</div>
        </div>
        <div class="actividad-status">
          <ion-icon [name]="a.completada ? 'checkmark-circle' : 'ellipse'" [color]="a.completada ? 'success' : 'medium'"></ion-icon>
        </div>
      </div>
    </div>

    <div *ngIf="!actividades || actividades.length === 0" class="empty">No hay actividades para hoy</div>
  </div>

  <!-- Inline overlay to inform user of generated PDF (fallback for APK) -->
  <div class="info-overlay" *ngIf="showReportAlert">
    <div class="info-card">
      <div class="info-header" style="color:black;">
        <h3>Reporte generado</h3>
        <button class="close-btn" (click)="showReportAlert=false">✕</button>
      </div>
      <div class="info-body">
        <p>El reporte fue generado con el nombre <strong>{{ reportFileName }}</strong>.</p>
      </div>
      <div class="info-actions">
        <ion-button expand="block" (click)="showReportAlert=false" class="enter-btn">Aceptar</ion-button>
      </div>
    </div>
  </div>
</ion-content>

<ion-footer class="fixed-footer">
  <ion-toolbar>
    <ion-button expand="block" class="enter-btn" (click)="generateReport()" style="color: white;">Generar reporte (PDF)</ion-button>
  </ion-toolbar>
</ion-footer>
